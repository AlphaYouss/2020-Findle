@using Microsoft.AspNetCore.Http;
@using System.Data;

@model ASP.NETFindle.Models.Search

@{ 
    Layout = "_FindleLayout";
}

@{
    ViewData["Title"] = "Home";
}
    <body onload="toggleFindable()">
        <h1>Home</h1>

        <span>Welcome @Context.Session.GetString("FirstName")!</span>

        <div id="findableArea"></div>

        <form method="post">
            <div class="form-group">
                <p><label asp-for="Name" class="mt-3"></label></p>
                <input asp-for="Name" class="form-control" name="Name" />
            </div>
            <button id="submit" class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
        </form>

        <div class="container-fluid">
            <div class="row justify-content-around">
                <div class="col-xl-12 col-lg-9 col-md-8 ml-auto">
                    <div class="row pt-5 mt-3 mb-5">
                        <div class="col-xl-6 col-sm-6">
                            <div class="d-flex text-center">
                                <div id="partial" class="mt-3"></div>
                            </div>
                        </div>
                        <div class="col-md-1">

                        </div>
                        <div class="col-xl-5 col-sm-5">
                            <div class="div-img-floor">
                                 <img class="img-floor" src="~/img/BegaandeGrond.png"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

<script>
    var url = '@Url.Action("SearchUser", "User")';
    $('#submit').on('click',function(e){
     e.preventDefault();
    $.ajax({
        type: "POST",
        url: url,
        data:$('form').serialize(),
    }).done(function (r) {
       $('#partial').html(r);

    }).fail(function (e) {
        console.log(e.responseText);
    });
    });
</script>

<script>
    function toggleFindable() {
        $('#findableArea').load('@Url.Action("Findable","User")');
    }
</script>